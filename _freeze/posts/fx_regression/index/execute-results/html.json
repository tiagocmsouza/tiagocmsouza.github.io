{
  "hash": "aab2dd53149ca91cec8b7f72fbdb38a8",
  "result": {
    "markdown": "---\ntitle: \"Currency Beta's with respect to the USD\"\nauthor: \"Tiago Souza\"\ndate: \"2023-01-20\"\ncategories: [econometrics, python]\n---\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport eurostat\nfrom datetime import datetime\nimport statsmodels.api as sm\n```\n:::\n\n\nThis post is to check whether noise in daily data constitutes a problem to the estimation of currenies' sensitivity with respect to the $USD$, a common exercise done in financial markets.\n\nAssume that there exists a relationship of currency $x_{t}$  with repect to the $USD$ on a dily basis:\n\n\n$$\n\\begin{aligned}\nx_{t} = \\alpha_{x} + \\beta_{x} USD_{t} + \\varepsilon_{t},\n\\end{aligned}\n$$\n\n\nthis equation could be estimated to find the parameters of interest (a statistical relationship, with no causal meaning!).\n\nRemeber that the estimated coefficient is given by the simple formula:\n\n$$\n\\begin{aligned}\n\\beta_{x} = \\frac{\\text{cov}(x_{t}, USD_{t})}{\\text{var}(USD_{t})}.\n\\end{aligned}\n$$\n\n\nHowever, estimating this coefficint this way may face difficulties given the large variance of daily data.  Given that, taken the parameters as fixed, nothing prevents one from resampling the data into a different frequency:\n\n\n$$\n\\begin{aligned}\n\\frac{1}{T}\\sum_{t = 1}^{T}{x_{t}} & = \\frac{1}{T}\\sum_{t = 1}^{T}{\\alpha_{x}} + \\frac{1}{T}\\sum_{t = 1}^{T}{\\beta_{x} USD_{t}} + \\frac{1}{T}\\sum_{t = 1}^{T}{\\varepsilon_{t}} \\\\\n\\quad{} \\\\\n& \\Rightarrow x_{T} = \\alpha_{x} + \\beta_{x} USD_{T} + \\varepsilon_{T}\n\\end{aligned}\n$$\n\n\nOur taks now is to test whether running the regressions over different sample frequencies yields distinct estimated coefficients.\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\ndf = eurostat.get_data_df('ert_bil_eur_d', flags=False)\ndf.rename(columns = {'currency\\\\TIME_PERIOD': 'currency'}, inplace = True)\n\nlist_statinfo = ['AVG']\nlist_currency = ['AUD', 'BRL', 'CAD', 'CHF', 'CNY', 'CZK', 'GBP', 'HUF', 'IDR', 'JPY', 'MXN', 'NZD', 'PLN', 'TRY', 'USD', 'ZAR']\n\ndf = df[(df['statinfo'].isin(list_statinfo)) & \\\n     (df['currency'].isin(list_currency))]\ndf.drop(columns = ['unit', 'statinfo', 'freq'], inplace = True)\n\ndf = pd.melt(df, id_vars = ['currency'], var_name = 'date')\n\ndf['date'] = df['date'].apply(lambda x: datetime.strptime(x, '%Y-%m-%d'))\ndf.set_index(['date', 'currency'], inplace = True)\n\ndf = df.unstack()\ndf[('value', 'EUR')] = 1\ndf = df.mul(1 / df.loc[:,('value', 'USD')], axis = 0)\ndf.drop('USD', axis = 1, level = 'currency', inplace = True)\nlist_currency = [x if x != 'USD' else 'EUR' for x in list_currency]\n\ndf = df.stack()\ndf.reset_index(level = 'currency', inplace = True)\ndf = df.pivot(columns = 'currency', values = 'value')\ndf = df.resample('M') \\\n     .last() \\\n     .pct_change() \\\n     .to_period('M')\n\ndf.tail()\n```\n\n::: {.cell-output .cell-output-display execution_count=52}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>currency</th>\n      <th>AUD</th>\n      <th>BRL</th>\n      <th>CAD</th>\n      <th>CHF</th>\n      <th>CNY</th>\n      <th>CZK</th>\n      <th>EUR</th>\n      <th>GBP</th>\n      <th>HUF</th>\n      <th>IDR</th>\n      <th>JPY</th>\n      <th>MXN</th>\n      <th>NZD</th>\n      <th>PLN</th>\n      <th>TRY</th>\n      <th>ZAR</th>\n    </tr>\n    <tr>\n      <th>date</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>2022-09</th>\n      <td>0.059950</td>\n      <td>0.047810</td>\n      <td>0.048542</td>\n      <td>0.001242</td>\n      <td>0.032115</td>\n      <td>0.025810</td>\n      <td>0.025851</td>\n      <td>0.052859</td>\n      <td>0.075208</td>\n      <td>0.026772</td>\n      <td>0.042786</td>\n      <td>-0.002841</td>\n      <td>0.079589</td>\n      <td>0.051887</td>\n      <td>0.020165</td>\n      <td>0.054018</td>\n    </tr>\n    <tr>\n      <th>2022-10</th>\n      <td>0.012801</td>\n      <td>-0.014687</td>\n      <td>-0.005591</td>\n      <td>0.020690</td>\n      <td>0.025950</td>\n      <td>-0.019187</td>\n      <td>-0.016744</td>\n      <td>-0.041075</td>\n      <td>-0.045926</td>\n      <td>0.024687</td>\n      <td>0.027813</td>\n      <td>-0.013094</td>\n      <td>-0.021209</td>\n      <td>-0.045096</td>\n      <td>0.003488</td>\n      <td>0.019047</td>\n    </tr>\n    <tr>\n      <th>2022-11</th>\n      <td>-0.050925</td>\n      <td>-0.001570</td>\n      <td>-0.011532</td>\n      <td>-0.051361</td>\n      <td>-0.030573</td>\n      <td>-0.050379</td>\n      <td>-0.044526</td>\n      <td>-0.040387</td>\n      <td>-0.047441</td>\n      <td>0.003728</td>\n      <td>-0.064750</td>\n      <td>-0.030038</td>\n      <td>-0.070510</td>\n      <td>-0.053657</td>\n      <td>0.000881</td>\n      <td>-0.075902</td>\n    </tr>\n    <tr>\n      <th>2022-12</th>\n      <td>-0.010287</td>\n      <td>-0.003815</td>\n      <td>0.001882</td>\n      <td>-0.027880</td>\n      <td>-0.025268</td>\n      <td>-0.036063</td>\n      <td>-0.027189</td>\n      <td>-0.002388</td>\n      <td>-0.045126</td>\n      <td>-0.012362</td>\n      <td>-0.051597</td>\n      <td>0.013884</td>\n      <td>-0.017598</td>\n      <td>-0.023580</td>\n      <td>0.004592</td>\n      <td>0.001690</td>\n    </tr>\n    <tr>\n      <th>2023-01</th>\n      <td>-0.019425</td>\n      <td>-0.016789</td>\n      <td>-0.005023</td>\n      <td>-0.003273</td>\n      <td>-0.016881</td>\n      <td>-0.022705</td>\n      <td>-0.014779</td>\n      <td>-0.026921</td>\n      <td>-0.027043</td>\n      <td>-0.023853</td>\n      <td>-0.013378</td>\n      <td>-0.032234</td>\n      <td>-0.011612</td>\n      <td>-0.008633</td>\n      <td>0.004550</td>\n      <td>0.011263</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}